# メモリ管理関連の用語定義

## メモリ領域の種類

### ヒープ領域（Heap Area）
- **ヒープ（Heap）**: オブジェクトが割り当てられる動的メモリ領域
- **New領域**: 新しいオブジェクトが配置される領域
  - **Eden空間**: オブジェクトが最初に配置される領域
  - **Survivor空間**: GC後に生存したオブジェクトが移動する領域
- **Old領域**: 長期間生存したオブジェクトが配置される領域

### メソッド領域（Method Area）
- **メソッドデータ**: メソッドのバイトコードと関連情報
- **定数プール**: 文字列リテラルや定数値
- **フィールドデータ**: staticフィールドの情報
- **メソッドテーブル**: クラスのメソッド情報

### スタック領域（Stack Area）
- **Javaスタック**: 各スレッドに割り当てられるスタック領域
- **スタックフレーム**: メソッド呼び出しごとの実行環境
  - **ローカル変数配列**: メソッドのローカル変数を格納
  - **オペランドスタック**: 命令実行時の作業領域
  - **フレーム情報**: 実行中のメソッドに関する情報

## オブジェクト構造

### オブジェクトヘッダー
- **マークワード**: オブジェクトの状態情報
  - **ハッシュコード**: オブジェクトの識別子
  - **GC年齢**: オブジェクトの世代情報
  - **ロック状態**: 同期制御の状態
- **クラスポインタ**: オブジェクトの型情報への参照

### オブジェクトデータ
- **インスタンス変数**: オブジェクトのフィールド値
- **配列長**: 配列オブジェクトの場合の要素数
- **参照フィールド**: 他のオブジェクトへの参照
- **プリミティブフィールド**: 基本データ型の値

## メモリ管理機能

### メモリ割り当て
- **割り当て戦略**:
  - **バンプポインタ割り当て**: 連続領域への高速割り当て
  - **フリーリスト割り当て**: 断片化領域の再利用
- **アラインメント**: メモリ境界の調整
- **TLAB（Thread Local Allocation Buffer）**: スレッド局所的な割り当て領域

### ガベージコレクション
- **GC方式**:
  - **コピーGC**: 生存オブジェクトをコピーして領域をクリア
  - **マークアンドスイープ**: 使用中オブジェクトの特定と不要領域の回収
- **GCルート**: 参照追跡の起点
  - **スタック変数**: メソッド内のローカル変数
  - **staticフィールド**: クラスの静的フィールド
  - **JNIグローバル参照**: ネイティブコードからの参照
- **世代別GC**:
  - **マイナーGC**: New領域の回収
  - **メジャーGC**: 全ヒープの回収

### メモリバリア
- **書き込みバリア**: 参照更新時の追加処理
- **読み込みバリア**: 参照読み取り時の追加処理

## メモリ管理のエラー状態
- **OutOfMemoryError**: メモリ不足エラー
  - **Java Heap Space**: ヒープ領域の不足
  - **PermGen Space**: 永続領域の不足
  - **GC Overhead Limit**: GCのオーバーヘッド超過
- **StackOverflowError**: スタック領域の溢れ

## パフォーマンス指標
- **メモリ使用量**: 各領域の使用状況
- **GC頻度**: ガベージコレクションの発生頻度
- **GC停止時間**: コレクション実行による一時停止時間
- **スループット**: GC時間を除いたアプリケーション実行時間の割合

## メモリ管理の実装規約
- **メモリアクセス**: スレッドセーフなアクセス方法の強制
- **解放規則**: 明示的な解放を避けGCに任せる
- **参照管理**: 適切な参照の保持と解放
- **リソース管理**: try-with-resourcesパターンの使用